<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Monitoring Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1e1e1e;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            color: #14ffec;
            border-bottom: 2px solid #0d7377;
            padding-bottom: 10px;
        }
        h2 {
            color: #0d7377;
            margin-top: 30px;
        }
        .summary {
            background-color: #2a2a2a;
            border-left: 4px solid #0d7377;
            padding: 15px;
            margin: 20px 0;
            display: flex;
            gap: 40px;
        }
        .summary-item {
            flex: 1;
        }
        .summary-label {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 5px;
        }
        .summary-value {
            color: #14ffec;
            font-size: 1.3em;
            font-weight: bold;
        }
        .chart-container {
            background-color: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            height: 350px;
        }
        .chart-title {
            color: #14ffec;
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .chart-hint {
            color: #888;
            font-size: 0.85em;
            margin-bottom: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: #2a2a2a;
        }
        th {
            background-color: #0d7377;
            color: #e0e0e0;
            padding: 12px;
            text-align: left;
            position: sticky;
            top: 0;
        }
        td {
            padding: 10px;
            border-bottom: 1px solid #3a3a3a;
        }
        tr:hover {
            background-color: #333;
        }
        .metric-name {
            color: #14ffec;
            font-weight: bold;
        }
        .value-min { color: #4ecdc4; }
        .value-max { color: #ff6b6b; }
        .value-avg { color: #ffd93d; }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #3a3a3a;
            text-align: center;
            color: #888;
            font-size: 0.9em;
        }
        .grid-2col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        h3 {
            color: #4ecdc4;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä System Monitoring Report - {{ source_name }}</h1>
        
        <div class="summary">
            <div class="summary-item">
                <div class="summary-label">Data Source</div>
                <div class="summary-value">{{ source_name }}</div>
            </div>
            <div class="summary-item">
                <div class="summary-label">Start Time</div>
                <div class="summary-value">{{ start_time }}</div>
            </div>
            <div class="summary-item">
                <div class="summary-label">Duration</div>
                <div class="summary-value">{{ duration }}</div>
            </div>
            <div class="summary-item">
                <div class="summary-label">Data Points</div>
                <div class="summary-value">{{ data_points }}</div>
            </div>
        </div>
        
        <script>
            // Hide GPU temp/power containers if no data
            window.addEventListener('DOMContentLoaded', () => {
                const chartData = JSON.parse('{{ chart_data_json }}');
                
                // Hide GPU temperature chart if all zeros
                if (!chartData.gpu.temp || chartData.gpu.temp.every(t => t === 0)) {
                    const tempContainer = document.getElementById('gpuTempContainer');
                    if (tempContainer) tempContainer.style.display = 'none';
                }
                
                // Hide GPU power chart if all zeros
                if (!chartData.gpu.power || chartData.gpu.power.every(p => p === 0)) {
                    const powerContainer = document.getElementById('gpuPowerContainer');
                    if (powerContainer) powerContainer.style.display = 'none';
                }
                
                // Hide swap chart if all zeros
                if (!chartData.memory.swap_percent || chartData.memory.swap_percent.every(s => s === 0)) {
                    const swapContainer = document.getElementById('swapContainer');
                    if (swapContainer) swapContainer.style.display = 'none';
                }
            });
        </script>
        
        <h2>üìà Interactive Time Series Charts</h2>
        <p class="chart-hint" style="color: #888; margin-bottom: 20px;">
            üí° <strong>Tip:</strong> Use mouse wheel to zoom, drag to pan, double-click to reset
        </p>
        
        <!-- CPU Charts Section -->
        <h3 style="color: #14ffec; margin-top: 30px;">üñ•Ô∏è CPU Metrics</h3>
        
        <div class="grid-2col">
            <div class="chart-container">
                <div class="chart-title">CPU Usage - Total (%)</div>
                <canvas id="cpuUsageChart"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">CPU Usage - Per Core (%)</div>
                <canvas id="cpuPerCoreChart"></canvas>
            </div>
        </div>
        
        <div class="grid-2col">
            <div class="chart-container">
                <div class="chart-title">CPU Frequency - Average (MHz)</div>
                <canvas id="cpuFreqChart"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">CPU Frequency - Per Core (MHz)</div>
                <canvas id="cpuPerCoreFreqChart"></canvas>
            </div>
        </div>
        
        <div class="chart-container">
            <div class="chart-title">üå°Ô∏è CPU Temperature (¬∞C)</div>
            <canvas id="cpuTempChart"></canvas>
        </div>
        
        <!-- GPU Charts Section -->
        <h3 style="color: #14ffec; margin-top: 30px;">üéÆ GPU Metrics</h3>
        
        <div class="grid-2col">
            <div class="chart-container">
                <div class="chart-title">GPU Usage (%) & Frequency (MHz)</div>
                <canvas id="gpuUsageChart"></canvas>
            </div>
            <!-- GPU Memory chart removed: Integrated GPUs share system RAM, no separate memory tracking -->
            <!-- 
            <div class="chart-container">
                <div class="chart-title">GPU Memory (MB) & Utilization (%)</div>
                <canvas id="gpuMemoryChart"></canvas>
            </div>
            -->
        </div>
        
        <div class="grid-2col">
            <div class="chart-container" id="gpuTempContainer">
                <div class="chart-title">üå°Ô∏è GPU Temperature (¬∞C)</div>
                <canvas id="gpuTempChart"></canvas>
            </div>
            <div class="chart-container" id="gpuPowerContainer">
                <div class="chart-title">‚ö° GPU Power Consumption (W)</div>
                <canvas id="gpuPowerChart"></canvas>
            </div>
        </div>
        
        <!-- Memory Charts Section -->
        <h3 style="color: #14ffec; margin-top: 30px;">üß† Memory Metrics</h3>
        
        <div class="grid-2col">
            <div class="chart-container">
                <div class="chart-title">Memory Usage (%)</div>
                <canvas id="memoryChart"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">Memory Details (GB)</div>
                <canvas id="memoryDetailsChart"></canvas>
            </div>
        </div>
        
        <div class="chart-container" id="swapContainer">
            <div class="chart-title">üíø Swap Usage (%)</div>
            <canvas id="swapChart"></canvas>
        </div>
        
        <!-- NPU Chart if available -->
        {{ npu_section }}
        
        <!-- Network I/O Chart if available -->
        {{ network_section }}
        
        <!-- Disk I/O Chart if available -->
        {{ disk_section }}
        
        <h2>üìä Statistics Summary</h2>
        <table>
            <thead>
                <tr>
                    <th>Metric</th>
                    <th>Minimum</th>
                    <th>Maximum</th>
                    <th>Average</th>
                    <th>Samples</th>
                </tr>
            </thead>
            <tbody>
                {{ stats_rows }}
            </tbody>
        </table>
        
        <div class="footer">
            Generated by Monitor Tool - Pro Edition<br>
            Report created: {{ report_time }}
        </div>
    </div>
    
    <script>
        const chartData = {{ chart_data_json }};
        
        // Common chart configuration
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    labels: { color: '#e0e0e0' }
                },
                zoom: {
                    pan: {
                        enabled: true,
                        mode: 'x',
                    },
                    zoom: {
                        wheel: {
                            enabled: true,
                        },
                        pinch: {
                            enabled: true
                        },
                        mode: 'x',
                    }
                }
            },
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Time',
                        color: '#e0e0e0'
                    },
                    ticks: { 
                        color: '#888',
                        maxRotation: 45,
                        minRotation: 45
                    },
                    grid: { color: '#3a3a3a' }
                },
                y: {
                    ticks: { color: '#888' },
                    grid: { color: '#3a3a3a' }
                }
            }
        };
        
        // CPU Usage (Total) Chart
        new Chart(document.getElementById('cpuUsageChart'), {
            type: 'line',
            data: {
                labels: chartData.timestamps,
                datasets: [{
                    label: 'CPU Usage (Total)',
                    data: chartData.cpu.usage_total,
                    borderColor: '#ff6b6b',
                    backgroundColor: 'rgba(255, 107, 107, 0.1)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: true
                }]
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: { display: true, text: 'Usage (%)', color: '#e0e0e0' },
                        min: 0,
                        max: 100
                    }
                }
            }
        });
        
        // CPU Usage Per-Core Chart
        const cpuCoreColors = ['#ff6b6b', '#ffd93d', '#4ecdc4', '#95e1d3', '#c589e8', '#ff9ff3', 
                               '#feca57', '#48dbfb', '#ff6348', '#1dd1a1', '#10ac84', '#ee5a6f'];
        const coreDatasets = [];
        for (let i = 0; i < chartData.cpu.max_cores; i++) {
            coreDatasets.push({
                label: `Core ${i}`,
                data: chartData.cpu.usage_per_core.map(cores => cores[i] || 0),
                borderColor: cpuCoreColors[i % cpuCoreColors.length],
                backgroundColor: 'transparent',
                borderWidth: 1.5,
                tension: 0.3,
                fill: false,
                hidden: i >= 4  // Hide cores 4+ by default, click legend to show
            });
        }
        new Chart(document.getElementById('cpuPerCoreChart'), {
            type: 'line',
            data: {
                labels: chartData.timestamps,
                datasets: coreDatasets
            },
            options: {
                ...commonOptions,
                plugins: {
                    ...commonOptions.plugins,
                    legend: {
                        ...commonOptions.plugins.legend,
                        onClick: function(e, legendItem, legend) {
                            // Default Chart.js legend click behavior
                            const index = legendItem.datasetIndex;
                            const ci = legend.chart;
                            const meta = ci.getDatasetMeta(index);
                            meta.hidden = meta.hidden === null ? !ci.data.datasets[index].hidden : null;
                            ci.update();
                        }
                    }
                },
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: { display: true, text: 'Usage (%)', color: '#e0e0e0' },
                        min: 0,
                        max: 100
                    }
                }
            }
        });
        
        // CPU Average Frequency Chart
        new Chart(document.getElementById('cpuFreqChart'), {
            type: 'line',
            data: {
                labels: chartData.timestamps,
                datasets: [{
                    label: 'CPU Frequency (Avg)',
                    data: chartData.cpu.freq_avg,
                    borderColor: '#ffd93d',
                    backgroundColor: 'rgba(255, 217, 61, 0.1)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: true
                }]
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: { display: true, text: 'Frequency (MHz)', color: '#e0e0e0' }
                    }
                }
            }
        });
        
        // CPU Per-Core Frequency Chart
        const freqDatasets = [];
        for (let i = 0; i < chartData.cpu.max_cores; i++) {
            freqDatasets.push({
                label: `Core ${i}`,
                data: chartData.cpu.freq_per_core.map(cores => cores[i] || 0),
                borderColor: cpuCoreColors[i % cpuCoreColors.length],
                backgroundColor: 'transparent',
                borderWidth: 1.5,
                tension: 0.3,
                fill: false,
                hidden: i >= 4  // Hide cores 4+ by default
            });
        }
        new Chart(document.getElementById('cpuPerCoreFreqChart'), {
            type: 'line',
            data: {
                labels: chartData.timestamps,
                datasets: freqDatasets
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: { display: true, text: 'Frequency (MHz)', color: '#e0e0e0' }
                    }
                }
            }
        });
        
        // CPU Temperature Chart
        const tempDatasets = [];
        const tempColors = ['#ff6348', '#ff9ff3', '#feca57', '#48dbfb', '#1dd1a1', '#10ac84'];
        for (let i = 0; i < chartData.cpu.max_temp_sensors; i++) {
            const sensorLabel = chartData.cpu.temps[0] && chartData.cpu.temps[0][i] ? chartData.cpu.temps[0][i].label : `Sensor ${i}`;
            // Keep Package/CPU temps visible, hide individual cores by default
            const isImportant = sensorLabel.toLowerCase().includes('package') || 
                               sensorLabel.toLowerCase().includes('cpu') ||
                               chartData.cpu.max_temp_sensors <= 2;  // Show all if only 1-2 sensors
            tempDatasets.push({
                label: sensorLabel,
                data: chartData.cpu.temps.map(sensors => sensors[i] ? sensors[i].current : 0),
                borderColor: tempColors[i % tempColors.length],
                backgroundColor: 'transparent',
                borderWidth: isImportant ? 2.5 : 1.5,  // Thicker line for important temps
                tension: 0.3,
                fill: false,
                hidden: !isImportant  // Hide individual core temps by default, show package/CPU
            });
        }
        new Chart(document.getElementById('cpuTempChart'), {
            type: 'line',
            data: {
                labels: chartData.timestamps,
                datasets: tempDatasets
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: { display: true, text: 'Temperature (¬∞C)', color: '#e0e0e0' }
                    }
                }
            }
        });
        
        // GPU Usage & Frequency Chart (Dual Y-axis)
        new Chart(document.getElementById('gpuUsageChart'), {
            type: 'line',
            data: {
                labels: chartData.timestamps,
                datasets: [{
                    label: 'GPU Usage (%)',
                    data: chartData.gpu.usage,
                    borderColor: '#4ecdc4',
                    backgroundColor: 'rgba(78, 205, 196, 0.1)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: true,
                    yAxisID: 'y'
                }, {
                    label: 'GPU Frequency (MHz)',
                    data: chartData.gpu.freq,
                    borderColor: '#ffd93d',
                    backgroundColor: 'rgba(255, 217, 61, 0.1)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: false,
                    yAxisID: 'y1'
                }]
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        type: 'linear',
                        position: 'left',
                        title: { display: true, text: 'Usage (%)', color: '#4ecdc4' },
                        min: 0,
                        max: 100
                    },
                    y1: {
                        type: 'linear',
                        position: 'right',
                        title: { display: true, text: 'Frequency (MHz)', color: '#ffd93d' },
                        ticks: { color: '#888' },
                        grid: { 
                            drawOnChartArea: false,
                            color: '#3a3a3a'
                        }
                    }
                }
            }
        });
        
        // GPU Memory Chart - DISABLED for integrated GPUs
        // Integrated GPUs share system RAM and don't have separate memory tracking
        /*
        new Chart(document.getElementById('gpuMemoryChart'), {
            type: 'line',
            data: {
                labels: chartData.timestamps,
                datasets: [{
                    label: 'GPU Memory Used',
                    data: chartData.gpu.memory_used,
                    borderColor: '#4ecdc4',
                    backgroundColor: 'rgba(78, 205, 196, 0.1)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: true
                }, {
                    label: 'GPU Memory Utilization',
                    data: chartData.gpu.memory_util,
                    borderColor: '#ff6b6b',
                    backgroundColor: 'rgba(255, 107, 107, 0.1)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: true,
                    yAxisID: 'y1'
                }]
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: { display: true, text: 'Memory (MB)', color: '#e0e0e0' },
                        position: 'left'
                    },
                    y1: {
                        ...commonOptions.scales.y,
                        title: { display: true, text: 'Utilization (%)', color: '#e0e0e0' },
                        position: 'right',
                        min: 0,
                        max: 100,
                        grid: { drawOnChartArea: false }
                    }
                }
            }
        });
        */
        
        // GPU Temperature Chart
        if (chartData.gpu.temp && chartData.gpu.temp.some(t => t > 0)) {
            new Chart(document.getElementById('gpuTempChart'), {
                type: 'line',
                data: {
                    labels: chartData.timestamps,
                    datasets: [{
                        label: 'GPU Temperature',
                        data: chartData.gpu.temp,
                        borderColor: '#ff6348',
                        backgroundColor: 'rgba(255, 99, 72, 0.1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        ...commonOptions.scales,
                        y: {
                            ...commonOptions.scales.y,
                            title: { display: true, text: 'Temperature (¬∞C)', color: '#e0e0e0' }
                        }
                    }
                }
            });
        }
        
        // GPU Power Chart
        if (chartData.gpu.power && chartData.gpu.power.some(p => p > 0)) {
            new Chart(document.getElementById('gpuPowerChart'), {
                type: 'line',
                data: {
                    labels: chartData.timestamps,
                    datasets: [{
                        label: 'GPU Power',
                        data: chartData.gpu.power,
                        borderColor: '#feca57',
                        backgroundColor: 'rgba(254, 202, 87, 0.1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        ...commonOptions.scales,
                        y: {
                            ...commonOptions.scales.y,
                            title: { display: true, text: 'Power (W)', color: '#e0e0e0' }
                        }
                    }
                }
            });
        }
        
        // Memory Usage Chart
        new Chart(document.getElementById('memoryChart'), {
            type: 'line',
            data: {
                labels: chartData.timestamps,
                datasets: [{
                    label: 'Memory Usage %',
                    data: chartData.memory.percent,
                    borderColor: '#a8e6cf',
                    backgroundColor: 'rgba(168, 230, 207, 0.1)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: true
                }]
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: { display: true, text: 'Usage (%)', color: '#e0e0e0' },
                        min: 0,
                        max: 100
                    }
                }
            }
        });
        
        // Memory Details Chart (Used/Available)
        new Chart(document.getElementById('memoryDetailsChart'), {
            type: 'line',
            data: {
                labels: chartData.timestamps,
                datasets: [{
                    label: 'Memory Used',
                    data: chartData.memory.used,
                    borderColor: '#ff6b6b',
                    backgroundColor: 'rgba(255, 107, 107, 0.1)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: true
                }, {
                    label: 'Memory Available',
                    data: chartData.memory.available,
                    borderColor: '#4ecdc4',
                    backgroundColor: 'rgba(78, 205, 196, 0.1)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: true
                }]
            },
            options: {
                ...commonOptions,
                scales: {
                    ...commonOptions.scales,
                    y: {
                        ...commonOptions.scales.y,
                        title: { display: true, text: 'Memory (GB)', color: '#e0e0e0' }
                    }
                }
            }
        });
        
        // Swap Usage Chart
        if (chartData.memory.swap_percent && chartData.memory.swap_percent.some(s => s > 0)) {
            new Chart(document.getElementById('swapChart'), {
                type: 'line',
                data: {
                    labels: chartData.timestamps,
                    datasets: [{
                        label: 'Swap Usage',
                        data: chartData.memory.swap_percent,
                        borderColor: '#c589e8',
                        backgroundColor: 'rgba(197, 137, 232, 0.1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        ...commonOptions.scales,
                        y: {
                            ...commonOptions.scales.y,
                            title: { display: true, text: 'Usage (%)', color: '#e0e0e0' },
                            min: 0,
                            max: 100
                        }
                    }
                }
            });
        }
        
        // NPU Usage Chart (if available)
        if (chartData.npu && chartData.npu.usage && chartData.npu.usage.length > 0) {
            new Chart(document.getElementById('npuUsageChart'), {
                type: 'line',
                data: {
                    labels: chartData.timestamps,
                    datasets: [{
                        label: 'NPU Usage',
                        data: chartData.npu.usage,
                        borderColor: '#c589e8',
                        backgroundColor: 'rgba(197, 137, 232, 0.1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        ...commonOptions.scales,
                        y: {
                            ...commonOptions.scales.y,
                            title: { display: true, text: 'Usage (%)', color: '#e0e0e0' },
                            min: 0,
                            max: 100
                        }
                    }
                }
            });
        }
        
        // Network I/O Chart (if available)
        if (chartData.network && (chartData.network.upload || chartData.network.download)) {
            new Chart(document.getElementById('networkChart'), {
                type: 'line',
                data: {
                    labels: chartData.timestamps,
                    datasets: [
                        {
                            label: 'Upload',
                            data: chartData.network.upload,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Download',
                            data: chartData.network.download,
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        ...commonOptions.scales,
                        y: {
                            ...commonOptions.scales.y,
                            title: { display: true, text: 'Speed (MB/s)', color: '#e0e0e0' },
                            min: 0
                        }
                    }
                }
            });
        }
        
        // Disk I/O Chart (if available)
        if (chartData.disk && (chartData.disk.read || chartData.disk.write)) {
            new Chart(document.getElementById('diskChart'), {
                type: 'line',
                data: {
                    labels: chartData.timestamps,
                    datasets: [
                        {
                            label: 'Read',
                            data: chartData.disk.read,
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Write',
                            data: chartData.disk.write,
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        ...commonOptions.scales,
                        y: {
                            ...commonOptions.scales.y,
                            title: { display: true, text: 'Speed (MB/s)', color: '#e0e0e0' },
                            min: 0
                        }
                    }
                }
            });
        }
        
        // Add double-click to reset zoom for all charts
        document.querySelectorAll('canvas').forEach(canvas => {
            canvas.addEventListener('dblclick', function() {
                const chart = Chart.getChart(canvas);
                if (chart && chart.resetZoom) {
                    chart.resetZoom();
                }
            });
        });
    </script>
</body>
</html>
